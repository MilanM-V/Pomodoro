<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Playlists</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }
        .container {
            margin: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #playlist {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-top: 20px;
        }
        .playlist-item {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }
        label {
            font-size: 18px;
            margin: 5px 0;
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        .subitems {
            margin-left: 20px;
            display: flex;
            flex-direction: column;
        }
        .subitems input {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Gestionnaire de Playlists</h1>
    <div id="playlist">
        <div class="playlist-item">
            <label>
                <input type="checkbox" name="Arcane">
                Arcane
            </label>
            <div class="subitems">
                <label>
                    <input type="checkbox" name="Arcane-0">
                    I Can't Hear It Now - Solo Piano
                </label>
                <label>
                    <input type="checkbox" name="Arcane-1">
                    Ma Meilleure Ennemie (from Arcane Season 2) - Piano Cover
                </label>
                <label>
                    <input type="checkbox" name="Arcane-2">
                    Isha's Song by Eason Chan - Piano Cover
                </label>
                <label>
                    <input type="checkbox" name="Arcane-3">
                    What Could Have Been ｜ EPIC FEMALE COVER
                </label>
            </div>
        </div>

        <div class="playlist-item">
            <label>
                <input type="checkbox" name="Snk">
                Snk (Attack on Titan)
            </label>
            <div class="subitems">
                <label>
                    <input type="checkbox" name="Snk-0">
                    Akuma no Ko (AOT Season 4 Part 2 Ending)
                </label>
                <label>
                    <input type="checkbox" name="Snk-1">
                    Call of Silence (Ymir's Theme)
                </label>
                <label>
                    <input type="checkbox" name="Snk-2">
                    Red Swan - Attack on Titan Opening (Lofi)
                </label>
                <label>
                    <input type="checkbox" name="Snk-3">
                    進撃pf-medley20130629巨人
                </label>
            </div>
        </div>

        <div class="playlist-item">
            <label>
                <input type="checkbox" name="Chill">
                Chill
            </label>
            <div class="subitems">
                <label>
                    <input type="checkbox" name="Chill-0">
                    Sweden - Minecraft Volume Alpha
                </label>
                <label>
                    <input type="checkbox" name="Chill-1">
                    Dinner In Paris
                </label>
                <label>
                    <input type="checkbox" name="Chill-2">
                    Lofitopía - Day Dream
                </label>
                <label>
                    <input type="checkbox" name="Chill-3">
                    Purpose Not Found
                </label>
            </div>
        </div>
    </div>
</div>

<script>
    const playlists = {
        Arcane: [
            "./musique/arcane/Arcane (League of Legends) - I Can't Hear It Now - Solo Piano.mp3",
            "./musique/arcane/Stromae, Pomme - Ma Meilleure Ennemie (from Arcane Season 2) - Piano Cover ⧸ Version.mp3",
            "./musique/arcane/OST Arcane (League of Legends) - Isha's Song by Eason Chan (Piano Cover ⧸ Version).mp3",
            "./musique/arcane/ARCANE： What Could Have Been ｜ EPIC FEMALE COVER (feat. Aloma Steele).mp3"
        ],
        Snk: [
            "./musique/snk/attack on titan lofi ~ akuma no ko (aot season 4 part 2 ending).mp3",
            "./musique/snk/Attack On Titan OST - Call of Silence (Ymir's Theme).mp3",
            "./musique/snk/red swan - attack on titan opening ｜ but it's lofi hip hop.mp3",
            "./musique/snk/進撃pf-medley20130629巨人.mp3"
        ],
        Chill: [
            "./musique/chill/C418  - Sweden - Minecraft Volume Alpha.mp3",
            "./musique/chill/Dinner In Paris.mp3",
            "./musique/chill/Lofitopía - Day Dream.mp3",
            "./musique/chill/purpose_not_found.mp3"
        ]
    };

    let playlist = [];
    let music_select = [];

    // Initialisation des cases à cocher
    document.querySelectorAll('#playlist input').forEach(input => {
        const playlistName = input.name;
        
        // Charger l'état depuis localStorage
        const isChecked = localStorage.getItem(playlistName) === 'true';
        input.checked = isChecked;

        if (isChecked) {
            if (playlists[playlistName]) {
                playlist.push(...playlists[playlistName]);
                music_select.push(playlistName);
            } else {
                playlist.push(`./musique/${playlistName}.mp3`);
                music_select.push(playlistName);
            }
        }

        // Gestion des événements de changement
        input.addEventListener('change', () => {
            if (input.checked) {
                // Ajouter à la playlist
                if (playlists[playlistName]) {
                    playlist.push(...playlists[playlistName]);
                    music_select.push(playlistName);
                    checkAllSubitems(playlistName, true);
                } else {
                    playlist.push(`./musique/${playlistName}.mp3`);
                    music_select.push(playlistName);
                }
                localStorage.setItem(playlistName, 'true');
            } else {
                // Supprimer de la playlist
                if (playlists[playlistName]) {
                    playlist = playlist.filter(item => !playlists[playlistName].includes(item));
                    music_select = music_select.filter(item => item !== playlistName);
                    checkAllSubitems(playlistName, false);
                } else {
                    playlist = playlist.filter(item => item !== `./musique/${playlistName}.mp3`);
                    music_select = music_select.filter(item => item !== playlistName);
                }
                localStorage.setItem(playlistName, 'false');
            }
        });
    });

    // Vérifie ou décoche les sous-items d'une playlist
    function checkAllSubitems(playlistName, isChecked) {
        const subitems = document.querySelectorAll(`#playlist input[name^="${playlistName}-"]`);
        subitems.forEach(subitem => {
            subitem.checked = isChecked;
            const subitemPath = `./musique/${playlistName}/${subitem.name}.mp3`;
            if (isChecked) {
                if (!playlist.includes(subitemPath)) playlist.push(subitemPath);
            } else {
                playlist = playlist.filter(item => item !== subitemPath);
            }
        });
    }
</script>

</body>
</html>
